

#Category only allowed for CHI
CHI_anti_imperialism = {
	
	CHI_release_korea = {

		icon = generic_nationalism

		available = {
			country_exists = KOR
		}

		days_mission_timeout = 180

		fire_only_once = yes
		activation = {			
			owns_state = 525
			owns_state = 527
			KOR = {
				exists = no
			}
		}

		visible = {
			owns_state = 525
			owns_state = 527
			KOR = {
				exists = no
			}
		}
		complete_effect = {
			add_political_power = 50
		}
		timeout_effect = {
			add_stability = -0.1 #naughty
		}
	}
}


#Category allowed for all potential nationalist china
#Category visible when CHI_army_reform focus is completed
CHI_army_reform = {

	CHI_army_reform = {

		icon = generic_prepare_civil_war

		available = {
			has_army_experience > 99
			has_war_with = JAP
		}

		cost = 0
		ai_will_do = {
			factor = 500
		}
		days_remove = 90

		visible = {
			OR = {
				has_idea = CHI_army_corruption_1
				has_idea = CHI_army_corruption_2
				has_idea = CHI_army_corruption_3
			}
		}
		remove_effect = {
			if = {
				limit = { has_idea = CHI_army_corruption_1 }
				swap_ideas = {
					remove_idea = CHI_army_corruption_1
					add_idea = CHI_army_corruption_2
				}
			}
			else_if = {
				limit = { has_idea = CHI_army_corruption_2 }
				swap_ideas = {
					remove_idea = CHI_army_corruption_2
					add_idea = CHI_army_corruption_3
				}
			}
			else_if = {
				limit = { has_idea = CHI_army_corruption_3 }
				remove_ideas = CHI_army_corruption_3
			}
		}
		complete_effect = {
			army_experience = -100
			custom_effect_tooltip = 90_days_tt
						
		}		
	}

	CHI_lessons_of_war = {
		icon = generic_army_support
		available = {
			has_army_experience > 199
			has_idea = CHI_incompetent_officers
			if = {
				limit = { has_idea = CHI_army_corruption_1 }
				NOT = { has_idea = CHI_army_corruption_1 }
			}

			if = {
				limit = { has_idea = CHI_army_corruption_2 }
				NOT = { has_idea = CHI_army_corruption_2 }
			}

			if = {
				limit = { has_idea = CHI_army_corruption_3 }
				NOT = { has_idea = CHI_army_corruption_3 }
			}

			if = {
				limit = {
					NOT = { has_idea = CHI_army_corruption_1 }
					NOT = { has_idea = CHI_army_corruption_2 }
					NOT = { has_idea = CHI_army_corruption_3 }
				}
				NOT = { has_idea = CHI_army_corruption_3 }
			}
		}

		cost = 0
		ai_will_do = {
			factor = 10
		}
		fire_only_once = yes

		visible = {
			tag = CHI
			has_war_with = JAP
		}

		complete_effect = {
			army_experience = -200
			remove_ideas = CHI_incompetent_officers
			set_country_flag = CHI_lessons_of_war_completed
		}		
	}

economy_decisions = {
	CHI_forced_loans = {

		icon = ger_mefo_bills

		available = {
			has_hyper_inflation = yes
		}

		cost = 100
		ai_will_do = {
			factor = 1
			modifier = {
				OR = {
					has_idea = CHI_hyper_inflation_none
					has_idea = CHI_hyper_inflation_1
				}
				factor = 0
			}
			modifier = {
				has_idea = CHI_hyper_inflation_3
				factor = 2
			}
			modifier = {
				has_idea = CHI_hyper_inflation_4
				factor = 5
			}
			modifier = {
				has_idea = CHI_hyper_inflation_5
				factor = 10
			}
		}

		visible = {
			has_completed_focus = KMT_political_effort
		}

		days_re_enable = 90

		complete_effect = {
			CHI_hyper_inflation_level_down = yes
			add_stability = -0.03
			add_war_support = -0.03
		}		
	}
}

war_measures = {

	CHI_scorched_earth_tactics = {
		icon = generic_scorched_earth
		available = {
			any_owned_state = {
				is_controlled_by = ROOT
				infrastructure > 0
				any_neighbor_state = {
					NOT = { is_fully_controlled_by = ROOT }
					controller = { has_war_with = CHI }
				}
			}
		}

		cost = 25

		ai_will_do = {
			factor = 1
		}

		visible = {			
			has_completed_focus = KMT_lure_them_in_strategy
		}

		days_re_enable = 30

		complete_effect = {
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					infrastructure > 0
					any_neighbor_state = {
						NOT = { is_fully_controlled_by = ROOT }
						controller = { has_war_with = CHI }
					}
				}
				damage_building = {
					type = infrastructure
					damage = 3
				}
			}
			random_country = {
				limit = {
					PRC_has_low_popular_support = yes
				}
				#TODO_WTT_CD maybe notification event?
				PRC_low_popular_support_level_down = yes
			}			
		}
	}
}


### #  # ###  #  #  ### ### ###  #   #    #### #   #  ##   ##  #  #  ##  ### ###  ##  #  #
 #  ## # #  # #  # #     #  #  #  # #     #    #   # #  # #  # #  # #  #  #   #  #  # ## #
 #  # ## #  # #  #   #   #  ###    #      ##    # #  #### #    #  # ####  #   #  #  # # ##
 #  #  # #  # #  #    #  #  #  #   #      #     # #  #  # #  # #  # #  #  #   #  #  # #  #
### #  # ###   ##  ###   #  #  #   #      ####   #   #  #  ##   ##  #  #  #  ###  ##  #  #

CHI_industrial_evacuations = {


	CHI_industrial_evacuations_from_gansu = { #283 #gansu
		icon = generic_scorched_earth
		available = {
			283 = { #283 #gansu
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 283
		}
		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			283 = { #283 #gansu
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes
		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 283
				}
				283 = { #283 #gansu
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_hainan = { #591 #hainan
		icon = generic_scorched_earth
		available = {
			591 = { #591 #hainan
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 591
		}
		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			591 = { #591 #hainan
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 591
				}
				591 = { #591 #hainan
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_guangzhou = { #592 #guangzhou
		icon = generic_scorched_earth
		available = {
			592 = { #592 #guangzhou
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 592
		}

		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			592 = { #592 #guangzhou
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 592
				}
				592 = { #592 #guangzhou
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_guangdong = { #593 #guangdong
		icon = generic_scorched_earth
		available = {
			593 = { #593 #guangdong
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 593
		}

		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			593 = { #593 #guangdong
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 593
				}
				593 = { #593 #guangdong
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_nanning = { #594 #nanning
		icon = generic_scorched_earth
		available = {
			594 = { #594 #nanning
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 594
		}

		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			594 = { #594 #nanning
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 594
				}
				594 = { #594 #nanning
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_fujian = { #595 #fujian
		icon = generic_scorched_earth
		available = {
			595 = { #595 #fujian
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 595
		}

		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			595 = { #595 #fujian
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 595
				}
				595 = { #595 #fujian
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_zhejiang = { #596 #zhejiang
		icon = generic_scorched_earth
		available = {
			596 = { #596 #zhejiang
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 596
		}

		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			596 = { #596 #zhejiang
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 596
				}
				596 = { #596 #zhejiang
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_shandong = { #597 #shandong
		icon = generic_scorched_earth
		available = {
			597 = { #597 #shandong
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 597
		}

		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			597 = { #597 #shandong
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 597
				}
				597 = { #597 #shandong
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_jiangsu = { #598 #jiangsu
		icon = generic_scorched_earth
		available = {
			598 = { #598 #jiangsu
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 598
		}
		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			598 = { #598 #jiangsu
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 598
				}
				598 = { #598 #jiangsu
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_guangxi = { #599 #guangxi
		icon = generic_scorched_earth
		available = {
			599 = { #599 #guangxi
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 599
		}

		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			599 = { #599 #guangxi
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 599
				}
				599 = { #599 #guangxi
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_jiangxi = { #600 #jiangxi
		icon = generic_scorched_earth
		available = {
			600 = { #600 #jiangxi
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 600
		}

		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			600 = { #600 #jiangxi
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 600
				}
				600 = { #600 #jiangxi
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_hunan = { #602 #hunan
		icon = generic_scorched_earth
		available = {
			602 = { #602 #hunan
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}	
		highlight_states = {
			state = 602
		}
		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			602 = { #602 #hunan
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 602
				}
				602 = { #602 #hunan
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_anhui = { #606 #anhui
		icon = generic_scorched_earth
		available = {
			606 = { #606 #anhui
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}

		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			606 = { #606 #anhui
				is_controlled_by = ROOT
			}			
		}
		highlight_states = {
			state = 606
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 606
				}
				606 = { #606 #anhui
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_henan = { #607 #henan
		icon = generic_scorched_earth
		available = {
			607 = { #607 #henan
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 607
		}
		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			607 = { #607 #henan
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 607
				}
				607 = { #607 #henan
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_beijing = { #608 #beijing
		icon = generic_scorched_earth
		available = {
			608 = { #608 #beijing
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 608
		}

		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			608 = { #608 #beijing
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 608
				}
				608 = { #608 #beijing
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_shanghai = { #613 #shanghai
	icon = generic_scorched_earth
		available = {
			613 = { #613 #shanghai
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 613
		}
		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			613 = { #613 #shanghai
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 613
				}
				613 = { #613 #shanghai
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_hebei = { #614 #hebei
		icon = generic_scorched_earth
		available = {
			614 = { #614 #hebei
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 614
		}
		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			614 = { #614 #hebei
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 614
				}
				614 = { #614 #hebei
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_ningxia = { #616 #ningxia
		icon = generic_scorched_earth
		available = {
			616 = { #616 #ningxia
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 616
		}
		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			616 = { #616 #ningxia
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 616
				}
				616 = { #616 #ningxia
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_hubei = { #620 #hubei
		icon = generic_scorched_earth
		available = {
			620 = { #620 #hubei
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 620
		}
		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			620 = { #620 #hubei
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 620
				}
				620 = { #620 #hubei
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CHI_industrial_evacuations_from_qingdao = { #743 #qingdao
		icon = generic_scorched_earth
		available = {
			743 = { #743 #qingdao
				OR = {
					arms_factory > 0
					industrial_complex > 0
				}
			}
		}
		highlight_states = {
			state = 743
		}
		visible = {
			has_completed_focus = KMT_the_big_rear_concept
			743 = { #743 #qingdao
				is_controlled_by = ROOT
			}			
		}

		fire_only_once = yes

		cost = 25

		days_remove = 15

		modifier = {}

		remove_effect = {
			if = {
				limit = {
					controls_state = 743
				}
				743 = { #743 #qingdao
					set_variable = {
						var = af_level
						value = arms_factory_level
					}
					set_variable = {
						var = af_to_move
						value = arms_factory_level
					}
					multiply_variable = {
						var = af_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					set_variable = {
						var = ic_level
						value = industrial_complex_level
					}
					set_variable = {
						var = ic_to_move
						value = industrial_complex_level
					}
					multiply_variable = {
						var = ic_to_move
						value = global.CHI_industrial_evacuations_amount_factor
					}
	
					custom_effect_tooltip = CHI_industrial_evacuations_remove_AF
					custom_effect_tooltip = CHI_industrial_evacuations_remove_IC
					hidden_effect = {				
						remove_building = {
							type = arms_factory
							level = af_level
						}
						remove_building = {
							type = industrial_complex
							level = ic_level
						}
					}
	
					#Move AF
					CONTROLLER = {
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = arms_factory
									size > 2
									include_locked = yes
								}
							}
	
							custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
							hidden_effect = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_AF						
								hidden_effect = {
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_AF
	
	
						#Move IC
						random_owned_controlled_state = {
							prioritize = { 605 603 601 }
							limit = {
								is_fully_controlled_by = ROOT
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
								free_building_slots = {
									building = industrial_complex
									size > 2
									include_locked = yes
								}
							}
							
							custom_effect_tooltip = CHI_industrial_evacuations_add_IC
							hidden_effect = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
						}
	
						#If no states are really safe or all safe are filled
						#Move to random controlled state
						if = {
							limit = {
								NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
								NOT = {
									any_state = {
										is_fully_controlled_by = ROOT
										any_neighbor_state = {
											is_controlled_by = ROOT
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
								}
							}
							random_owned_controlled_state = {
								prioritize = { 605 603 601 }
								limit = {
									is_controlled_by = ROOT
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
	
								custom_effect_tooltip = CHI_industrial_evacuations_add_IC
								hidden_effect = {
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
								}
							}
						}
						clr_country_flag = CHI_industrial_evacuations_moved_IC
					}			
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
}

###  ##  ###  ### ###  ##  #  #      ## #  # ###  ###   ##  ###  ### 
#   #  # #  # #    #  #    ## #     #   #  # #  # #  # #  # #  #  #  
##  #  # ###  ##   #  # ## # ##      #  #  # ###  ###  #  # ###   #  
#   #  # #  # #    #  #  # #  #       # #  # #    #    #  # #  #  #  
#    ##  #  # ### ###  ##  #  #     ##   ##  #    #     ##  #  #  #  

foreign_support = {
	CHI_flying_tigers = {
		icon = generic_air
		available = {
			has_equipment = { fighter_equipment > 149 }
		}
		visible = {
			has_completed_focus = KMT_air_reform
		}
		cost = 25
		ai_will_do = {
			factor = 1
		}
		fire_only_once = yes
		days_remove = -1
		complete_effect = {
				random_country = {
					limit = {
						has_completed_focus = KMT_air_reform
					}
					custom_effect_tooltip = flying_tigers_tt
					hidden_effect = {
						USA = {
							send_equipment = {
								target = PREV
								type = fighter_equipment
								amount = 150
							}
						}
					}
				}
			add_war_support = 0.05
		}
		modifier = {
			air_volunteer_cap = 100
		}
	}
}
