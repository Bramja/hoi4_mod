
on_actions = {
	on_startup = {
		effect = {
			
				#Initializing the global.small_airbase_list array#

				if = {
					limit = {
						NOT = { has_global_flag = airbase_list_created }
					}
					set_global_flag = airbase_list_created

					## Wasteland airfields ##
					add_to_array = { global.wasteland_airbase_list = 790 } #Al Wahat, Libya, ITA
					add_to_array = { global.wasteland_airbase_list = 514 } #Algerian Desert, FRA
					add_to_array = { global.wasteland_airbase_list = 786 } #Mauritanian Desert, FRA
					add_to_array = { global.wasteland_airbase_list = 782 } #Tomboktou, FRA
					add_to_array = { global.wasteland_airbase_list = 515 } #Southern Sahara
					add_to_array = { global.wasteland_airbase_list = 273 } #Libyan Desert
					add_to_array = { global.wasteland_airbase_list = 775 } #B.E.T.
					add_to_array = { global.wasteland_airbase_list = 767 } #Darfur, UK
					add_to_array = { global.wasteland_airbase_list = 552 } #Western Desert, UK
					add_to_array = { global.wasteland_airbase_list = 793 } #West Gobi Desert
					add_to_array = { global.wasteland_airbase_list = 794 } #North Gobi Desert
					add_to_array = { global.wasteland_airbase_list = 792 } #South Gobi Desert
					add_to_array = { global.wasteland_airbase_list = 796 } #Impassable Burma
					add_to_array = { global.wasteland_airbase_list = 674 } #Central Australia
					add_to_array = { global.wasteland_airbase_list = 516 } #Northwest Siberia
					add_to_array = { global.wasteland_airbase_list = 644 } #Northeast Siberia


					###Pacific Islands###
					add_to_array = { global.small_airbase_list = 555 } #Kuril Islands, JAP
					add_to_array = { global.small_airbase_list = 650 } #Attu Island, USA
					add_to_array = { global.small_airbase_list = 647 } #Palau, JAP
					add_to_array = { global.small_airbase_list = 734 } #Nendo, France
					add_to_array = { global.small_airbase_list = 643 } #Ellice Islands, UK
					add_to_array = { global.small_airbase_list = 726 } #Samoa, NZL
					add_to_array = { global.small_airbase_list = 641 } #Tahiti, FRA
					add_to_array = { global.small_airbase_list = 642 } #Phoenix Island, USA
					add_to_array = { global.small_airbase_list = 631 } #Midway Island, USA
					add_to_array = { global.small_airbase_list = 630 } #Johnston Atoll, USA
					add_to_array = { global.small_airbase_list = 727 } #Line islands, USA
					add_to_array = { global.small_airbase_list = 632 } #Wake Island, USA
					add_to_array = { global.small_airbase_list = 648 } #Marcus Island, JAP
					add_to_array = { global.small_airbase_list = 725 } #Nauru, UK
					add_to_array = { global.small_airbase_list = 270 } #Pitcairn Island, UK
					add_to_array = { global.small_airbase_list = 649 } #Galapagos Islands, ECU
					add_to_array = { global.small_airbase_list = 633 } #Marshall Islands, JAP
					add_to_array = { global.small_airbase_list = 639 } #Gilbert Islands, UK
					add_to_array = { global.medium_airbase_list = 684 } #Caroline islands, JAP, LglobalE chain
					add_to_array = { global.medium_airbase_list = 646 } #Saipan, JAP, Small Island
					add_to_array = { global.medium_airbase_list = 638 } #Guam, USA,
					add_to_array = { global.medium_airbase_list = 636 } #Fiji, UK
					add_to_array = { global.medium_airbase_list = 645 } #Iwo Jima, Japan

					###Indian Ocean###
					add_to_array = { global.small_airbase_list = 712 } #Cocos, UK
					add_to_array = { global.small_airbase_list = 711 } #Christmas Island, UK
					add_to_array = { global.small_airbase_list = 733 } #Andaman, UK
					add_to_array = { global.small_airbase_list = 710 } #Diego Garcia, UK
					add_to_array = { global.small_airbase_list = 281 } #Maldives, UK
					add_to_array = { global.small_airbase_list = 709 } #Seychelles, UK
					add_to_array = { global.small_airbase_list = 708 } #Comoros, FRA
					add_to_array = { global.small_airbase_list = 706 } #Reunion, FRA
					add_to_array = { global.small_airbase_list = 707 } #Mauritius, UK
					add_to_array = { global.small_airbase_list = 833 } #Bahrain, UK
					add_to_array = { global.medium_airbase_list = 834 } #Quatar, UK


					###Atlantic###
					add_to_array = { global.small_airbase_list = 720 } #South Georgia, UK
					add_to_array = { global.small_airbase_list = 299 } #Falklands, UK
					add_to_array = { global.small_airbase_list = 704 } #Saint Helena, UK
					add_to_array = { global.small_airbase_list = 703 } #Ascension, UK
					add_to_array = { global.small_airbase_list = 705 } #Sao Tome, POR
					add_to_array = { global.small_airbase_list = 702 } #Cape Verde, POR
					add_to_array = { global.small_airbase_list = 697 } #Madeira, POR
					add_to_array = { global.small_airbase_list = 696 } #Bermuda, UK
					add_to_array = { global.small_airbase_list = 337 } #Faroes, DEN-UK
					add_to_array = { global.medium_airbase_list = 698 } #Azores, POR
					add_to_array = { global.medium_airbase_list = 178 } #Canary Islands, SPR

					###Caribbean###
					add_to_array = { global.small_airbase_list = 690 } #Northern Bahamas, UK
					add_to_array = { global.small_airbase_list = 693 } #Southern Bahamas, UK				
					add_to_array = { global.small_airbase_list = 694 } #French Caribbean, FRA
					add_to_array = { global.small_airbase_list = 308 } #Leeward Islands, UK
					add_to_array = { global.small_airbase_list = 692 } #Windward Islands, UK
					add_to_array = { global.small_airbase_list = 691 } #Trinidad, UK
					add_to_array = { global.small_airbase_list = 695 } #Curacao, HOL
					add_to_array = { global.medium_airbase_list = 685 } #Panama Canal, USA (oh yeah I did)
					add_to_array = { global.medium_airbase_list = 689 } #Jamaica, UK
					add_to_array = { global.medium_airbase_list = 686 } #Puerto Rico, USA

					for_each_scope_loop = {
						array = global.small_airbase_list

						set_state_flag = small_airbase
					}
					for_each_scope_loop = {
						array = global.medium_airbase_list

						set_state_flag = medium_airbase
					}
				}
			}
		}
		
	#THIS IS THE AIRBASE LIMITER.
on_daily = { 
	effect = {
		if = {
			limit = {
                NOT = { has_global_flag = airbase_limiter_ran }
				has_game_rule = {
					rule = air_limiter_rule
					option = AIRLIMIT
				}
			}
			for_each_scope_loop = {
				array = global.small_airbase_list
				if = {
					limit = {
						air_base > 2
					}
					remove_building = {
						type = air_base
						level = 1
					}
					controller = {
						PREV = { save_event_target_as = GDU_badairport1 }
						country_event = { id = gduairlimiter.1 }
					}
				}
			}
			for_each_scope_loop = {
				array = global.medium_airbase_list
				if = {
					limit = {
						air_base > 5
					}
					remove_building = {
						type = air_base
						level = 1
					}
					controller = {
						PREV = { save_event_target_as = GDU_badairport2 }
						country_event = { id = gduairlimiter.2 }
					}
				}
			}
			for_each_scope_loop = {
				array = global.wasteland_airbase_list
				if = {
					limit = { 
						air_base > 0
					}
					remove_building = { 
						type = air_base 
						level = 1 
					}
					controller = { 
						PREV = { save_event_target_as = GDU_badairport3 } 
						country_event = { id = gduairlimiter.3 }
					}
				}
			}
			set_global_flag = { flag = airbase_limiter_ran value = 1 days = 30 }
		}
	}
}
}
	}